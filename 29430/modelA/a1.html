<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Math Equation Grid Game</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <style>
        /* Inline CSS for brevity */
        body { font-family: 'Arial', sans-serif; }
        #gameArea { margin-top: 20px; }
        .equation { 
            border: 1px solid #ccc; 
            padding: 10px; 
            margin: 5px; 
            cursor: pointer; 
            display: inline-block; 
            width: calc(20% - 10px);
            text-align: center;
        }
        .equation:hover { background-color: #f0f0f0; }
        #status, #score, #lives { font-weight: bold; }
        #restartBtn { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Math Equation Grid Game</h1>
        <div id="status">Target Number: <span id="targetNumber"></span></div>
        <div>Score: <span id="score">0</span> | Lives: <span id="lives">3</span></div>
        <div id="gameArea"></div>
        <button id="restartBtn" class="btn btn-primary" onclick="restartGame()">Restart Game</button>
    </div>
    <script>
        let score = 0;
let lives = 3;
let targetNumber;
let equations = [];

function generateTargetNumber() {
    return Math.floor(Math.random() * 50) + 1;
}

function generateEquations(target, correctCount = Math.floor(Math.random() * 5) + 4, totalCount = 20) {
    let correctEquations = new Set();
    let incorrectEquations = new Set();

    // Generate correct equations
    while(correctEquations.size < correctCount) {
        let a = Math.floor(Math.random() * 20) + 1;
        let b = Math.floor(Math.random() * 20) + 1;
        let op = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
        let eq = `${a} ${op} ${b}`;
        if(eval(eq) === target && op !== '/' || (op === '/' && b !== 0 && a % b === 0 && eval(eq) === target)) {
            correctEquations.add(eq);
        }
    }

    // Generate incorrect equations
    while(incorrectEquations.size < totalCount - correctEquations.size) {
        let eq = `${Math.floor(Math.random() * 20) + 1} ${['+', '-', '*', '/'][Math.floor(Math.random() * 4)]} ${Math.floor(Math.random() * 20) + 1}`;
        if(!correctEquations.has(eq) && eval(eq) !== target) {
            incorrectEquations.add(eq);
        }
    }

    return [...correctEquations, ...incorrectEquations].sort(() => Math.random() - 0.5);
}

function startRound() {
    targetNumber = generateTargetNumber();
    document.getElementById('targetNumber').textContent = targetNumber;
    equations = generateEquations(targetNumber);
    displayEquations();
}

function displayEquations() {
    let gameArea = document.getElementById('gameArea');
    gameArea.innerHTML = '';
    equations.forEach(eq => {
        let div = document.createElement('div');
        div.className = 'equation';
        div.textContent = eq + ' = ' + eval(eq);
        div.onclick = () => checkEquation(eq, div);
        gameArea.appendChild(div);
    });
}

function checkEquation(eq, div) {
    if(eval(eq) === targetNumber) {
        div.style.backgroundColor = 'lightgreen';
        div.onclick = null;
        score++;
        document.getElementById('score').textContent = score;
        if(--equations.length === 0) nextRound();
    } else {
        lives--;
        document.getElementById('lives').textContent = lives;
        if(lives === 0) endGame();
    }
}

function nextRound() {
    setTimeout(startRound, 1000);
}

function endGame() {
    document.getElementById('status').textContent = 'Game Over!';
    document.getElementById('restartBtn').style.display = 'inline-block';
}

function restartGame() {
    score = 0;
    lives = 3;
    document.getElementById('score').textContent = score;
    document.getElementById('lives').textContent = lives;
    document.getElementById('restartBtn').style.display = 'none';
    startRound();
}

startRound();
    </script>
</body>
</html>