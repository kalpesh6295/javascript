<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Roulette Betting Game (1-18)</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Arial", sans-serif;
        background-color: #f8f9fa;
        padding: 20px;
        text-align: center;
        margin: auto;
        max-width: 900px;
      }

      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 40px;
      }

      .balance-display {
        font-size: 20px;
        font-weight: bold;
        background-color: #ecf0f1;
        padding: 10px 20px;
        border-radius: 5px;
        color: #2c3e50;
      }

      .wheel-container {
        margin: 20px auto;
        max-width: 300px;
        position: relative;
      }

      .wheel {
        border-radius: 50%;
        width: 100%;
        height: 100%;
        border: 8px solid #343a40;
      }

      .arrow {
        position: absolute;
        top: -50px;
        left: 36%;
        rotate: 180deg;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 20px solid transparent;
        border-right: 20px solid transparent;
        border-bottom: 50px solid #e74c3c;
      }

      .spin-btn {
        margin-top: 20px;
        margin-bottom: 20px;
      }

      .control-panel {
        margin-top: 30px;
      }

      .result-message {
        margin-top: 20px;
        font-size: 18px;
        font-weight: bold;
      }

      .number-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
      }

      .number-box {
        border: 1px solid #bdc3c7;
        border-radius: 10px;
        padding: 15px;
        font-size: 16px;
        text-align: center;
        transition: background-color 0.3s, box-shadow 0.3s;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        height: 90px;
        width: 90px;
      }

      .number-box:hover {
        background-color: #e0f7fa;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
      }

      .even-odd, .range {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .even-odd div, .range div {
        width: 360px;
      }

      .even-odd div input, .range div input {
        width: 144px;
      }

      .number-box.red {
        background-color: #e74c3c;
        color: white;
      }

      .number-box.black {
        background-color: #34495e;
        color: white;
      }

      .number-box.win {
        background-color: green !important;
      }

      .number-box.lose {
        background-color: red !important;
      }

      /* For smaller screens */
      @media (max-width: 768px) {
        .number-grid {
          grid-template-columns: repeat(3, 1fr);
          gap: 10px;
        }

        .number-box {
          width: 70px;
          height: 70px;
          font-size: 14px;
        }

        .wheel-container {
          max-width: 250px;
        }

        .arrow {
          top: -40px;
          border-bottom: 40px solid #e74c3c;
        }

        .bet-button {
          width: 120px;
          font-size: 14px;
        }

        .bet-amount-input {
          width: 80px;
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>Roulette Betting Game (1-18)</h1>
      <div class="balance-display">
        Wallet Balance: $<span id="balance">1000</span>
      </div>
    </div>

    <!-- Wheel Container -->
    <div class="wheel-container">
      <canvas id="canvas" width="500" height="500"></canvas>
      <div class="arrow"></div>
    </div>

    <button id="spinButton" class="btn btn-primary spin-btn">Spin the Wheel</button>

    <!-- Betting Grid -->
    <div class="number-grid">
      <!-- Betting numbers will be dynamically generated -->
    </div>

    <h2>Odd, Even</h2>
    <div class="number-grid even-odd">
      <div class="number-box black" id="bet-odd-container">
        Odd:
        <input type="number" id="oddBet" min="0" max="100" value="0" />
      </div>
      <div class="number-box red" id="bet-even-container">
        Even:
        <input type="number" id="evenBet" min="0" max="100" value="0" />
      </div>
    </div>

    <h2>Range Bet</h2>
    <div class="number-grid range">
      <div class="number-box red" id="range1Bet-container">
        1-6
        <input type="number" id="range1Bet" min="0" max="100" value="0" />
      </div>
      <div class="number-box black" id="range2Bet-container">
        7-12
        <input type="number" id="range2Bet" min="0" max="100" value="0" />
      </div>
      <div class="number-box red" id="range3Bet-container">
        13-18
        <input type="number" id="range3Bet" min="0" max="100" value="0" />
      </div>
    </div>

    <div id="resultMessage" class="result-message"></div>

    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      const spinButton = document.getElementById("spinButton");
      const resultMessage = document.getElementById("resultMessage");
      const balanceDisplay = document.getElementById("balance");
      const numberGrid = document.querySelector(".number-grid");

      let startAngle = 0;
      let totalBet;
      let arc;
      let spinTimeout = null;
      let spinTime = 0;
      let spinTimeTotal = 0;
      let spinAngleStart;
      let selectedNumberBets = {};
      let balance = 1000;
      let isSpinning = false;

      const numbers = [...Array(18).keys()].map((i) => i + 1);
      const redNumbers = numbers.filter((_, index) => index % 2 !== 0);
      const blackNumbers = numbers.filter((_, index) => index % 2 === 0);

      canvas.width = 300;
      canvas.height = 300;

      function drawRouletteWheel() {
        arc = Math.PI / (numbers.length / 2);
        const outsideRadius = 140;
        const insideRadius = 60;
        const textRadius = 100;

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        for (let i = 0; i < numbers.length; i++) {
          const angle = startAngle + i * arc;
          ctx.fillStyle = redNumbers.includes(numbers[i])
            ? "#e74c3c"
            : "#34495e";
          ctx.beginPath();
          ctx.arc(150, 150, outsideRadius, angle, angle + arc, false);
          ctx.arc(150, 150, insideRadius, angle + arc, angle, true);
          ctx.fill();

          ctx.save();
          ctx.fillStyle = "white";
          ctx.translate(
            150 + Math.cos(angle + arc / 2) * textRadius,
            150 + Math.sin(angle + arc / 2) * textRadius
          );
          ctx.rotate(angle + arc / 2 + Math.PI / 2);
          ctx.fillText(numbers[i], -ctx.measureText(numbers[i]).width / 2, 0);
          ctx.restore();
        }
      }

      function spinWheel() {
        if (isSpinning) return;

        totalBet = getTotalBet();
        if (totalBet === 0) {
          resultMessage.textContent = "Please place at least one bet!";
          return;
        }

        if (totalBet > balance) {
          resultMessage.textContent = "Insufficient balance!";
          return;
        }

        balance -= totalBet;
        balanceDisplay.textContent = balance;

        isSpinning = true;
        spinAngleStart = Math.random() * 10 + 10;
        spinTime = 0;
        spinTimeTotal = Math.random() * 3 + 4 * 1000;

        rotateWheel();
      }

      function rotateWheel() {
        document.querySelector("button").disabled = true;
        spinTime += 30;
        if (spinTime >= spinTimeTotal) {
          stopRotateWheel();
          return;
        }
        const spinAngle =
          spinAngleStart - easeOut(spinTime, 0, spinAngleStart, spinTimeTotal);
        startAngle += (spinAngle * Math.PI) / 180;
        drawRouletteWheel();
        spinTimeout = setTimeout(rotateWheel, 30);
      }

      function stopRotateWheel() {
        clearTimeout(spinTimeout);
        const degrees = (startAngle * 180) / Math.PI + 90;
        const arcd = (arc * 180) / Math.PI;
        const index = Math.floor((360 - (degrees % 360)) / arcd);
        const winningNumber = numbers[index];

        checkWin(winningNumber);
        isSpinning = false;
      }

      function checkWin(winningNumber) {
        let totalWinnings = 0;
        document
          .querySelectorAll(".number-box")
          .forEach((box) => box.classList.remove("win", "lose"));

        Object.keys(selectedNumberBets).forEach((number) => {
          const betAmount = selectedNumberBets[number];
          const box = document.querySelector(
            `.number-box[data-number="${number}"]`
          );
          if (parseInt(number) === winningNumber) {
            totalWinnings += betAmount * 18;
            box.classList.add("win");
          } else {
            box.classList.add("lose");
          }
        });

        const evenBet = parseInt(document.getElementById("evenBet").value) || 0;
        const oddBet = parseInt(document.getElementById("oddBet").value) || 0;
        if (evenBet > 0) {
          if (winningNumber % 2 === 0) {
            totalWinnings += evenBet * 2;
            document.getElementById("bet-even-container").classList.add("win");
          } else {
            document
              .getElementById("bet-even-container")
              .classList.add("lose");
          }
        }
        if (oddBet > 0) {
          if (winningNumber % 2 !== 0) {
            totalWinnings += oddBet * 2;
            document.getElementById("bet-odd-container").classList.add("win");
          } else {
            document.getElementById("bet-odd-container").classList.add("lose");
          }
        }

        const range1Bet =
          parseInt(document.getElementById("range1Bet").value) || 0;
        const range2Bet =
          parseInt(document.getElementById("range2Bet").value) || 0;
        const range3Bet =
          parseInt(document.getElementById("range3Bet").value) || 0;

        if (winningNumber >= 1 && winningNumber <= 6 && range1Bet > 0) {
          totalWinnings += range1Bet * 3;
          document.getElementById("range1Bet-container").classList.add("win");
        } else if (winningNumber >= 7 && winningNumber <= 12 && range2Bet > 0) {
          totalWinnings += range2Bet * 3;
          document.getElementById("range2Bet-container").classList.add("win");
        } else if (
          winningNumber >= 13 &&
          winningNumber <= 18 &&
          range3Bet > 0
        ) {
          totalWinnings += range3Bet * 3;
          document.getElementById("range3Bet-container").classList.add("win");
        }

        const netWinnings = totalWinnings - totalBet;
        balance += totalWinnings;
        if (netWinnings > 0) {
          resultMessage.textContent = `You won $${netWinnings}! The winning number is ${winningNumber} ${winningNumber%2===0? 'red': 'black'}`;
        } else {
          resultMessage.textContent = `You lost ${totalBet - totalWinnings}! The winning number is ${winningNumber}`;
        }

        balanceDisplay.textContent = balance;
        setTimeout(resetBets, 3000);
      }

      function easeOut(t, b, c, d) {
        const ts = (t /= d) * t;
        const tc = ts * t;
        return b + c * (tc + -3 * ts + 3 * t);
      }

      function setupBettingGrid() {
        numberGrid.innerHTML = "";
        numbers.forEach((number) => {
          const div = document.createElement("div");
          div.classList.add("number-box");
          div.classList.add(redNumbers.includes(number) ? "red" : "black");
          div.textContent = number;
          div.dataset.number = number;

          const input = document.createElement("input");
          input.type = "number";
          input.min = "1";
          input.max = "100";
          input.placeholder = "Bet";
          input.classList.add("bet-amount-input");
          div.classList.add("grid-item");

          input.addEventListener("input", () => {
            if (parseInt(input.value) > 0) {
              selectedNumberBets[number] = parseInt(input.value);
            } else {
              delete selectedNumberBets[number];
            }
          });

          div.appendChild(input);
          numberGrid.appendChild(div);
        });
      }

      function getTotalBet() {
        let totalBet = 0;
        Object.keys(selectedNumberBets).forEach((key) => {
          totalBet += selectedNumberBets[key];
        });
        totalBet += parseInt(document.getElementById("evenBet").value) || 0;
        totalBet += parseInt(document.getElementById("oddBet").value) || 0;
        totalBet += parseInt(document.getElementById("range1Bet").value) || 0;
        totalBet += parseInt(document.getElementById("range2Bet").value) || 0;
        totalBet += parseInt(document.getElementById("range3Bet").value) || 0;
        return totalBet;
      }

      function resetBets() {
        selectedNumberBets = {};
        const betContainers = document.querySelectorAll(".number-box");
        betContainers.forEach((container) => {
          container.classList.remove("win", "lose");
        });

        const betInputs = document.querySelectorAll(".number-box input");
        betInputs.forEach((input) => {
          input.value = 0;
        });

        document.querySelector("button").disabled = false;
      }

      setupBettingGrid();
      drawRouletteWheel();
      spinButton.addEventListener("click", spinWheel);
    </script>
  </body>
</html>
