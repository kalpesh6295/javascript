<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Math Challenge Game</title>
  
  <!-- Bootstrap CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <style>
    body, html {
      height: 100%;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #74ebd5, #ACB6E5);
      font-family: 'Poppins', sans-serif;
    }

    .game-container {
      background-color: #ffffff;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      border-radius: 20px;
      padding: 40px 30px;
      text-align: center;
      width: 100%;
      max-width: 600px;
      position: relative;
      transition: all 0.3s ease;
    }

    h1 {
      color: #34495e;
      font-size: 32px;
      margin-bottom: 30px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .equation {
      font-size: 48px;
      font-weight: bold;
      color: #3498db;
      margin: 20px 0;
      transition: all 0.3s ease;
    }

    .input-box {
      font-size: 26px;
      padding: 15px;
      margin-top: 20px;
      width: 100%;
      max-width: 300px;
      border-radius: 10px;
      border: 2px solid #3498db;
      text-align: center;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .input-box:focus {
      border-color: #2980b9;
      box-shadow: 0 0 10px rgba(52, 152, 219, 0.4);
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      gap: 10px; /* Add proper gap between info boxes */
      align-items: center;
      text-transform: uppercase;
    }

    .score, .timer, .level, .combo {
      font-size: 20px;
      font-weight: bold;
      color: #34495e;
      background: #f8f9fa;
      padding: 10px 15px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      flex-grow: 1; /* Make them grow equally */
      margin: 0 5px; /* Add margin for better spacing */
    }

    .btn-container {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
    }

    button {
      padding: 15px 40px;
      font-size: 20px;
      border-radius: 10px;
      transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
      width: 45%; /* Make the buttons smaller for better spacing */
    }

    button:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
    }

    .btn-primary {
      background-color: #3498db;
      border: none;
      color: #ffffff;
    }

    .btn-primary:hover {
      background-color: #2980b9;
    }

    .btn-danger {
      background-color: #e74c3c;
      border: none;
      color: #ffffff;
    }

    .btn-danger:hover {
      background-color: #c0392b;
    }

    .btn-success {
      background-color: #2ecc71;
      border: none;
      color: #ffffff;
    }

    .btn-success:hover {
      background-color: #27ae60;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 24px;
      }

      .equation {
        font-size: 36px;
      }

      button {
        font-size: 18px;
        padding: 12px 30px;
        width: 48%;
      }

      .input-box {
        font-size: 22px;
        padding: 12px;
      }

      .info-row {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>

  <div class="game-container">
    <h1>Math Challenge</h1>

    <div class="info-row">
      <div class="level">Level: <span id="level">1</span></div>
      <div class="timer">Time Left: <span id="timer">10</span>s</div>
      <div class="score">Score: <span id="score">0</span></div>
      <div class="combo">Combo: <span id="combo">x1</span></div>
    </div>

    <div class="equation" id="equation">3 + 2 = ?</div>

    <input type="number" id="answerInput" class="input-box" placeholder="Your answer" disabled />
    
    <div class="btn-container">
      <button id="submitAnswer" class="btn btn-primary" disabled>Submit</button>
      <button id="resetGame" class="btn btn-danger" disabled>Reset</button>
    </div>
    
    <div id="message" class="mt-3"></div>
    <button id="startGame" class="btn btn-success mt-3">Start Game</button>
  </div>

  <script>
    // Game variables
    let currentLevel = 1;
    let score = 0;
    let roundsPlayed = 0;
    let comboMultiplier = 1; // Combo multiplier for scoring
    let timeLeft = 10;
    let timerInterval = null;

    const levelThreshold = 10; // Number of rounds before difficulty increases
    const baseTime = 10; // Base time for each equation

    // DOM elements
    const equationElement = document.getElementById('equation');
    const answerInput = document.getElementById('answerInput');
    const submitAnswer = document.getElementById('submitAnswer');
    const startGame = document.getElementById('startGame');
    const resetGame = document.getElementById('resetGame');
    const scoreElement = document.getElementById('score');
    const comboElement = document.getElementById('combo');
    const timerElement = document.getElementById('timer');
    const levelElement = document.getElementById('level');
    const messageElement = document.getElementById('message');

    // Generate a random equation based on the difficulty level
    function generateEquation(level) {
      let num1, num2, operator, equation;
      switch (level) {
        case 1:
          num1 = Math.floor(Math.random() * 10) + 1;
          num2 = Math.floor(Math.random() * 10) + 1;
          operator = ['+', '-'][Math.floor(Math.random() * 2)];
          break;
        case 2:
          num1 = Math.floor(Math.random() * 20) + 1;
          num2 = Math.floor(Math.random() * 20) + 1;
          operator = ['+', '-', '*'][Math.floor(Math.random() * 3)];
          break;
        case 3:
          num1 = Math.floor(Math.random() * 50) + 1;
          num2 = Math.floor(Math.random() * 50) + 1;
          operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
          break;
        default:
          num1 = Math.floor(Math.random() * 100) + 1;
          num2 = Math.floor(Math.random() * 100) + 1;
          operator = ['+', '-', '*', '/'][Math.floor(Math.random() * 4)];
      }

      equation = `${num1} ${operator} ${num2}`;
      equationElement.textContent = equation + ' = ?';
      return eval(equation).toFixed(2); // Evaluate the equation
    }

    // Start the game
    function startGameFunction() {
      resetGame.disabled = false;
      startGame.disabled = true;
      answerInput.disabled = false;
      submitAnswer.disabled = false;
      score = 0;
      roundsPlayed = 0;
      comboMultiplier = 1;
      scoreElement.textContent = score;
      comboElement.textContent = `x${comboMultiplier}`;
      levelElement.textContent = currentLevel;
      generateNewRound();
    }

    // Generate new round
    function generateNewRound() {
      timeLeft = baseTime;
      const correctAnswer = generateEquation(currentLevel);
      startTimer();
      
      submitAnswer.onclick = () => {
        const playerAnswer = parseFloat(answerInput.value);

        // Check if the answer is correct
        if (playerAnswer === parseFloat(correctAnswer)) {
          score += comboMultiplier; // Add score based on the current combo multiplier
          comboMultiplier++; // Increase the combo multiplier
          roundsPlayed++;
          messageElement.textContent = "Correct!";
          timeLeft += 2; // Add 2 bonus seconds
        } else {
          endGame(`Wrong answer! The correct answer was ${correctAnswer}.`);
          return;
        }

        scoreElement.textContent = score;
        comboElement.textContent = `x${comboMultiplier}`;
        answerInput.value = '';

        // Increase difficulty after every 10 rounds
        if (roundsPlayed % levelThreshold === 0) {
          currentLevel++;
          levelElement.textContent = currentLevel;
        }

        generateNewRound();
      };
    }

    // Timer function
    function startTimer() {
      clearInterval(timerInterval);
      timerElement.textContent = timeLeft;
      timerInterval = setInterval(() => {
        timeLeft--;
        timerElement.textContent = timeLeft;

        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          endGame("Time's up! You lose.");
        }
      }, 1000);
    }

    // End the game with a message
    function endGame(message) {
      clearInterval(timerInterval);
      messageElement.textContent = message;
      answerInput.disabled = true;
      submitAnswer.disabled = true;
      comboMultiplier = 1; // Reset the combo multiplier
    }

    // Reset the game
    function resetGameFunction() {
      clearInterval(timerInterval);
      timeLeft = baseTime;
      score = 0;
      roundsPlayed = 0;
      currentLevel = 1;
      comboMultiplier = 1;
      messageElement.textContent = '';
      answerInput.value = '';
      scoreElement.textContent = score;
      comboElement.textContent = `x${comboMultiplier}`;
      levelElement.textContent = currentLevel;
      startGame.disabled = false;
      answerInput.disabled = true;
      submitAnswer.disabled = true;
      resetGame.disabled = true;
      timerElement.textContent = timeLeft;
    }

    // Event listeners
    startGame.addEventListener('click', startGameFunction);
    resetGame.addEventListener('click', resetGameFunction);
  </script>
</body>
</html>
