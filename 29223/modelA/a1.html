<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Search Game</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        #game-container { max-width: 600px; margin: 0 auto; }
        .letter { width: 30px; height: 30px; text-align: center; border: 1px solid #ccc; cursor: pointer; }
        .selected { background-color: yellow; }
        .found { background-color: green; color: white; }
        .word-list { list-style-type: none; padding-left: 0; }
        .word-list li { padding: 5px 0; }
        .crossed { text-decoration: line-through; }
    </style>
</head>
<body>

<div id="game-container" class="p-3">
    <h2>Word Search Game</h2>
    <select id="difficulty">
        <option value="easy">Easy</option>
        <option value="medium">Medium</option>
        <option value="hard">Hard</option>
    </select>
    <button onclick="startGame()">Start Game</button>
    <div id="timer"></div>
    <div id="grid" class="mt-3"></div>
    <ul id="wordList" class="word-list mt-3"></ul>
    <div id="modal" class="modal" tabindex="-1" style="display:none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Game Over!</h5>
                </div>
                <div class="modal-body">
                    <p id="modal-message"></p>
                    <p>Your Time: <span id="current-time"></span></p>
                    <p>Best Time: <span id="best-time"></span></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="startGame()">Restart</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const gridSize = 10;
    let words = [], gridLetters = [], selectedLetters = [], timer, bestTime = Infinity, gameActive = false;

    function fetchWords(difficulty) {
        // This is a placeholder. Replace with actual API call.
        return fetch(`https://your-api-endpoint.com/words?difficulty=${difficulty}`)
            .then(response => response.json());
    }

    function createGrid() {
        const grid = document.getElementById('grid');
        grid.innerHTML = '';
        for (let i = 0; i < gridSize * gridSize; i++) {
            let cell = document.createElement('div');
            cell.className = 'letter';
            cell.onmousedown = () => startSelection(i);
            cell.onmouseover = () => continueSelection(i);
            cell.onmouseup = endSelection;
            grid.appendChild(cell);
        }
    }

    function populateGrid(words) {
        gridLetters = Array(gridSize * gridSize).fill('').map(() => String.fromCharCode(65 + Math.floor(Math.random() * 26)));
        // Simplified word placement logic here for brevity
        words.forEach(word => {
            // Place word randomly in grid (omitted for complexity)
        });
        updateGridDisplay();
    }

    function updateGridDisplay() {
        const cells = document.querySelectorAll('#grid .letter');
        cells.forEach((cell, index) => {
            cell.textContent = gridLetters[index];
        });
    }

    function startSelection(index) {
        if (!gameActive) return;
        selectedLetters = [index];
    }

    function continueSelection(index) {
        if (!gameActive || selectedLetters.length === 0) return;
        // Logic to handle selection
    }

    function endSelection() {
        if (!gameActive) return;
        checkWord();
    }

    function checkWord() {
        let word = selectedLetters.map(i => gridLetters[i]).join('');
        if (words.includes(word)) {
            markWordFound(word);
        }
        selectedLetters = [];
    }

    function markWordFound(word) {
        // Update grid and word list
        words = words.filter(w => w !== word);
        if (words.length === 0) endGame(true);
    }

    function startTimer(duration) {
        let timerDisplay = document.getElementById('timer');
        let timeLeft = duration;
        timer = setInterval(() => {
            if (timeLeft <= 0) {
                clearInterval(timer);
                endGame(false);
            }
            timerDisplay.textContent = timeLeft--;
        }, 1000);
    }

    function startGame() {
        const difficulty = document.getElementById('difficulty').value;
        fetchWords(difficulty).then(data => {
            words = data;
            createGrid();
            populateGrid(words);
            startTimer(60); // 60 seconds for example
            gameActive = true;
            document.getElementById('modal').style.display = 'none';
        });
    }

    function endGame(won) {
        gameActive = false;
        clearInterval(timer);
        if (won) document.getElementById('modal-message').textContent = "Congratulations!";
        else document.getElementById('modal-message').textContent = "Time's Up!";
        document.getElementById('current-time').textContent = 60 - document.getElementById('timer').textContent;
        document.getElementById('best-time').textContent = Math.min(bestTime, 60 - document.getElementById('timer').textContent);
        document.getElementById('modal').style.display = 'block';
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>